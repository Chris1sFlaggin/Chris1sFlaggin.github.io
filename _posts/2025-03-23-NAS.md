---
layout: single
title: "My personal NAS!"
date: 2025-10-19
categories: Projects
---
> ##### Disclaimer:
> Questa guida è a scopo puramente educativo.

# Il progetto

### L'intuizione
##### L'altro giorno ero in università e tra una lezione in cui non riuscivo a concentrarmi e l'altra ho avuto un'idea: "perchè non possiedo una NAS in casa?!".<dl>Comincio subito a cercare di farmi venire in mente delle idee, la prima che ho avuto è stata un proxy cache, bella idea che sicuramente farò in futuro, ma non è quello che sto cercando ora, vorrei qualcosa che mi offrisse più servizi a livello pratico e visivo che possano essere utile anche ai miei genitori.
### L'idea
- ##### Un cloud personale con immich
- ##### Un reverse proxy per vedere contenuti limitati sulle smart TV (siti di streaming, ecc...)

## Componenti

### Raspberry Pi 3b
[![Raspberry Pi 3b](https://m.media-amazon.com/images/I/91zSu44+34L.jpg)](https://www.amazon.it/Raspberry-PI-Model-Scheda-madre/dp/B01CD5VC92)
>(clicca sull'immagine per ottenere link)
### Custodia
[![3.5" Screen Case](https://m.media-amazon.com/images/I/61VWMWUQ-pL._AC_UF1000,1000_QL80_.jpg)](https://www.amazon.it/-/en/Raspberry-Supports-Raspbian-RetroPie-Multi-System/dp/B07NTH1JWH)
>(clicca sull'immagine per ottenere link)

## SetUp

### 1. SetUp reverse proxy 

#### 1.1. Squid
SSH sul raspberry e digita i seguenti comandi per installare *squid*, un proxy server che può modificare gli header HTML.
```bash
# installa squid
sudo apt install squid -y
# backup file conf
sudo mv /etc/squid/squid.conf /etc/squid/squid.conf.bak
# modifica file conf
sudo nano /etc/squid/squid.conf
```

Vi lascio il link al mio file funzionante:
[Link al mio file]()

```bash
# applica le modifiche e controlla lo stato
sudo systemctl restart squid
sudo systemctl enable squid
sudo systemctl status squid
```
>Verifica che lo stato sia Active: active (running).

#### 1.2. Nginx
```bash
# installa nginx
sudo apt install nginx -y
# rimuovi file conf default
sudo rm -f /etc/nginx/sites-enabled/default
# crea nuovo file conf
sudo nano /etc/nginx/sites-available/tv-proxy
```

Anche qui lascio il link al mio file funzionante:
[Link al mio file]()

```bash
# crea un symlink dal tuo file di configurazione al directory sites-enabled.
sudo ln -s /etc/nginx/sites-available/tv-proxy /etc/nginx/sites-enabled/
# verifica la sintassi del tuo file conf
sudo nginx -t
```

```bash
# applica le modifiche
sudo systemctl restart nginx
sudo systemctl enable nginx
sudo systemctl status nginx
```
>Verifica che lo stato sia Active: active (running).

### 2. SetUp immich 

#### 2.1. Download immich 
Per la memoria io ho montato un hard disk.
Immich consiglia il metodo backup 3-2-1, per il quale sto aspettando l'hardware necessario (un altro hard disk).
```bash
# crea una cartella e muoviti all'interno
mkdir ./immich-app
cd ./immich-app
# scarica docker-compose.yml e .env
wget -O docker-compose.yml https://github.com/immich-app/immich/releases/latest/download/docker-compose.yml
wget -O .env https://github.com/immich-app/immich/releases/latest/download/example.env
# personalizza il file .env
nano .env
```

#### 2.2. Run immich 
Per installare docker: [Docker installation guide](https://docs.docker.com/engine/install/ubuntu/)
```bash
# runna il docker
docker compose up -d
```
Prosegui dalla gui web: [http://IP:2283](http://IP:2283).

> ##### ATTENZIONE:
> Io ho avuto dei problemi con immich per colpa delle caratteristiche del mio raspberry e ho cancellato dal docker-compose le righe inerenti al container immich_machine_learning e ho creato un file swap in modo da alleggerire la ram leggermente.

#### 2.3. SetUp external VPN
Per rendere il mio cloud raggiungibile anche fuori casa ho scelto [Tailscale](tailscale.com) per creare una vpn, servizio che consiglio per velocità e intuitività.

### 3. Visualizzatore a schermo

Ho creato uno script di python che crea un'immagine dello stato ogni 5 secondi e la manda al buffer del display usando *fbi*.

[Link allo script]()
