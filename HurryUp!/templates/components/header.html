<!-- Header Component for Pizza Delivery Application -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<header class="navbar">
    <div class="navbar-container">
        <!-- Logo and Brand -->
        <div class="logo">
            <a href="/">
                <img src="/static/img/pizza.png" alt="Pizza Delivery">
                <span>PizzaExpress</span>
            </a>
        </div>

        <!-- Navigation -->
        <nav>
            <ul class="nav-links">
                <li><a href="/" class="nav-link">Home</a></li>
                <li><a href="/orders" class="nav-link">Ordini <span id="pending-orders-count" class="badge">0</span></a></li>
                <li><a href="/map" class="nav-link">Mappa</a></li>
                <li><a href="/delivery" class="nav-link">Consegne <span id="activeDeliveriesCount" class="badge">0</span></a></li>
            </ul>
        </nav>

        <!-- Mobile Menu Toggle -->
        <button class="menu-toggle" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <!-- User Actions -->
        <div class="user-actions">
            <button id="new-order-btn" class="btn btn-primary">Nuovo Ordine</button>
        </div>
    </div>
</header>

<script>
    // Mobile menu toggle
    document.querySelector('.menu-toggle').addEventListener('click', function() {
        document.querySelector('.nav-links').classList.toggle('active');
    });

    // Update order counts
    function updateHeaderCounts() {
        fetch('/api/stats')
            .then(response => response.json())
            .then(stats => {
                const pendingOrders = document.getElementById('pending-orders-count');
                if (pendingOrders) {
                    pendingOrders.textContent = stats.pending || 0;
                }
                
                const activeDeliveries = document.getElementById('activeDeliveriesCount');
                if (activeDeliveries) {
                    activeDeliveries.textContent = stats.in_delivery || 0;
                }
            })
            .catch(error => console.error('Error updating counts:', error));
    }

    // Execute when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        updateHeaderCounts();
        
        // Update counts every 30 seconds
        setInterval(updateHeaderCounts, 30000);
    });
</script>